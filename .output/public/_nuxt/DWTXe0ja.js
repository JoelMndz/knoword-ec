import{f as F}from"./XqKEbuup.js";import{h as g}from"./C5S46NFB.js";import{d as h,r as B,o as P,g as a,t as f,N as y,A as e,z as t,P as n,B as i,y as d,Q as j,R as M,x as U,S as q,v as z,U as O,T as Q,V as R}from"./BlbsmEqZ.js";import{_ as G}from"./o6MVvimY.js";import{u as H}from"./xZELp0by.js";const I=h({__name:"CardRespuestasCuestionario",props:{cuestionario:{type:Object,required:!0}},setup(C){const c=B([]),_=[{title:"Estudiante",key:"estudiante"},{title:"Fecha",key:"fecha"},{title:"Aciertos",key:"aciertos"},{title:"Tiempo",key:"tiempo"}];return P(async()=>{c.value=await $fetch("/api/juego/resultados/"+C.cuestionario._id)}),(l,V)=>{const r=a("VDataTable"),x=a("VCardText"),p=a("VCard");return f(),y(p,{title:`Resultados - ${C.cuestionario.nombre}`},{default:e(()=>[t(x,null,{default:e(()=>[t(r,{headers:_,"no-data-text":"No hay datos",items:n(c)},{"item.estudiante":e(({item:o})=>[i(d(o._estudiante.nombre),1)]),"item.fecha":e(({item:o})=>[i(d(new Date(o.createdAt).toLocaleDateString()),1)]),"item.aciertos":e(({item:o})=>[i(d(o.respuestas.filter(m=>m.correcta).length)+" / "+d(o.respuestas.length),1)]),"item.tiempo":e(({item:o})=>[i(d(("formatearTiempo"in l?l.formatearTiempo:n(F))(n(g)(n(g)(o.fin).diff(n(g)(o.inicio))).seconds())),1)]),_:1},8,["items"])]),_:1})]),_:1},8,["title"])}}}),Z=h({__name:"index",async setup(C){let c,_;const l=H(),{cuestionarios:V}=j(l),r=B(""),x=(p,o)=>{l.eliminarCuestionario(p)};return[c,_]=M(()=>l.obtenerCuestionarios()),await c,_(),(p,o)=>{const m=a("VBtn"),v=a("VCol"),D=a("VTextField"),w=a("VRow"),k=a("v-list-item-title"),T=a("v-list-item"),$=I,b=a("VDialog"),L=a("VCardActions"),A=a("VCard"),E=G,N=a("VContainer");return f(),y(N,null,{default:e(()=>[o[4]||(o[4]=U("h1",{class:"text-h3 text-center"},"Cuestionarios",-1)),t(w,{class:"mt-5"},{default:e(()=>[t(v,{cols:"auto"},{default:e(()=>[t(m,{icon:"mdi-plus",to:"/app/profesor/cuestionario/nuevo"})]),_:1}),t(v,null,{default:e(()=>[t(D,{modelValue:n(r),"onUpdate:modelValue":o[0]||(o[0]=s=>q(r)?r.value=s:null),clearable:"","prepend-inner-icon":"mdi-magnify"},null,8,["modelValue"])]),_:1})]),_:1}),t(w,null,{default:e(()=>[(f(!0),z(Q,null,O(n(r)?n(V).filter(s=>s.nombre.toLocaleLowerCase().includes(n(r).toLocaleLowerCase())):n(V),s=>(f(),y(v,{cols:"6",sm:"4",md:"3"},{default:e(()=>[t(E,{cuestionario:s},{opcionesMenu:e(()=>[t(T,{link:"",to:`/app/profesor/cuestionario/detalle/${s._id}`},{default:e(()=>[t(k,null,{default:e(()=>o[1]||(o[1]=[i("Ver detalle")])),_:1})]),_:2},1032,["to"]),t(b,{"max-width":"650"},{activator:e(({props:u})=>[t(T,R({ref_for:!0},u),{default:e(()=>[t(k,null,{default:e(()=>o[2]||(o[2]=[i("Ver Resultados")])),_:1})]),_:2},1040)]),default:e(()=>[t($,{cuestionario:s},null,8,["cuestionario"])]),_:2},1024),t(b,{"max-width":"450"},{activator:e(({props:u})=>[t(T,R({ref_for:!0},u),{default:e(()=>[t(k,null,{default:e(()=>o[3]||(o[3]=[i("Eliminar")])),_:1})]),_:2},1040)]),default:e(({isActive:u})=>[t(A,{title:"Eliminar Cuestionario",text:`Â¿Estas seguro de eliminar el cuestionario '${s.nombre}'?`},{default:e(()=>[t(L,null,{default:e(()=>[t(m,{text:"Cancelar",color:"error",onClick:S=>u.value=!1,variant:"tonal"},null,8,["onClick"]),t(m,{text:"Confirmar",onClick:S=>x(s._id,u.value),variant:"tonal"},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["text"])]),_:2},1024)]),_:2},1032,["cuestionario"])]),_:2},1024))),256))]),_:1})]),_:1})}}});export{Z as default};
